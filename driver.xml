<?xml version="1.0" encoding="UTF-8"?>
<devicedata>
    <!-- Driver Metadata -->
    <copyright>Copyright 2024. All rights reserved.</copyright>
    <manufacturer>Amazon</manufacturer>
    <name>Fire TV Remote (RE)</name>
    <model>Fire TV</model>
    <creator>Zane St. John</creator>
    <created>01/02/2026 13:40</created>
    <modified>01/03/2026 08:07</modified>
    <version>8</version>

    <!-- Driver Configuration -->
    <control>lua_gen</control>
    <controlmethod>IP</controlmethod>
    <driver>DriverWorks</driver>
    <auto_update>true</auto_update>
    <minimum_auto_update_version>1</minimum_auto_update_version>
    <minimum_os_version>2.10.6</minimum_os_version>

    <!-- Small/Large Icons -->
    <small>icons/device_sm.png</small>
    <large>icons/device_lg.png</large>

    <config>
        <!-- Lua Script -->
        <script file="driver.lua"/>

        <!-- Documentation -->
        <documentation file="www/documentation/index.html"/>

        <!-- Driver Properties -->
        <properties>
            <!-- Connection Settings -->
            <property>
                <name>Fire TV IP Address</name>
                <type>STRING</type>
                <default></default>
                <readonly>false</readonly>
            </property>

            <property>
                <name>Fire TV Name</name>
                <type>STRING</type>
                <default></default>
                <readonly>true</readonly>
            </property>

            <property>
                <name>Connection Status</name>
                <type>STRING</type>
                <default>Not Connected</default>
                <readonly>true</readonly>
            </property>

            <!-- Pairing Settings -->
            <property>
                <name>Pairing Status</name>
                <type>STRING</type>
                <default>Not Paired</default>
                <readonly>true</readonly>
            </property>

            <property>
                <name>Controller Name</name>
                <type>STRING</type>
                <default>Control4</default>
                <readonly>false</readonly>
            </property>

            <property>
                <name>PIN Code</name>
                <type>STRING</type>
                <default></default>
                <readonly>false</readonly>
            </property>

            <!-- Advanced Settings -->
            <property>
                <name>Command Timeout</name>
                <type>RANGED_INTEGER</type>
                <minimum>5</minimum>
                <maximum>30</maximum>
                <default>10</default>
                <readonly>false</readonly>
            </property>

            <property>
                <name>Auto Wake</name>
                <type>LIST</type>
                <items>
                    <item>Yes</item>
                    <item>No</item>
                </items>
                <default>Yes</default>
                <readonly>false</readonly>
            </property>

            <property>
                <name>Debug Mode</name>
                <type>LIST</type>
                <items>
                    <item>Off</item>
                    <item>On</item>
                </items>
                <default>Off</default>
                <readonly>false</readonly>
            </property>

            <property>
                <name>Driver Version</name>
                <type>STRING</type>
                <default>1.0.0</default>
                <readonly>true</readonly>
            </property>
        </properties>

        <!-- Actions (UI buttons in Composer) -->
        <actions>
            <action>
                <name>Start Pairing</name>
                <command>StartPairing</command>
            </action>

            <action>
                <name>Verify PIN</name>
                <command>VerifyPIN</command>
            </action>

            <action>
                <name>Test Connection</name>
                <command>TestConnection</command>
            </action>

            <action>
                <name>Refresh Device Info</name>
                <command>RefreshDeviceInfo</command>
            </action>

            <action>
                <name>Clear Pairing</name>
                <command>ClearPairing</command>
            </action>
        </actions>

        <!-- Commands (for programming and drivers) -->
        <commands>
            <!-- Pairing Commands -->
            <command>
                <name>StartPairing</name>
                <description>Request PIN display on Fire TV for pairing</description>
            </command>

            <command>
                <name>VerifyPIN</name>
                <description>Verify PIN and complete pairing</description>
            </command>

            <command>
                <name>TestConnection</name>
                <description>Test connection to Fire TV</description>
            </command>

            <command>
                <name>RefreshDeviceInfo</name>
                <description>Refresh device information</description>
            </command>

            <command>
                <name>ClearPairing</name>
                <description>Clear saved pairing credentials</description>
            </command>

            <!-- Navigation Commands -->
            <command>
                <name>Up</name>
                <description>Navigate up</description>
            </command>

            <command>
                <name>Down</name>
                <description>Navigate down</description>
            </command>

            <command>
                <name>Left</name>
                <description>Navigate left</description>
            </command>

            <command>
                <name>Right</name>
                <description>Navigate right</description>
            </command>

            <command>
                <name>Select</name>
                <description>Select/OK/Enter</description>
            </command>

            <!-- System Commands -->
            <command>
                <name>Home</name>
                <description>Go to home screen</description>
            </command>

            <command>
                <name>Back</name>
                <description>Go back</description>
            </command>

            <command>
                <name>Menu</name>
                <description>Open context menu</description>
            </command>

            <!-- Media Commands -->
            <command>
                <name>PlayPause</name>
                <description>Toggle play/pause</description>
            </command>

            <command>
                <name>Play</name>
                <description>Play media</description>
            </command>

            <command>
                <name>Pause</name>
                <description>Pause media</description>
            </command>

            <command>
                <name>Stop</name>
                <description>Stop media</description>
            </command>

            <command>
                <name>FastForward</name>
                <description>Fast forward media</description>
                <params>
                    <param>
                        <name>Seconds</name>
                        <type>RANGED_INTEGER</type>
                        <minimum>1</minimum>
                        <maximum>300</maximum>
                    </param>
                </params>
            </command>

            <command>
                <name>Rewind</name>
                <description>Rewind media</description>
                <params>
                    <param>
                        <name>Seconds</name>
                        <type>RANGED_INTEGER</type>
                        <minimum>1</minimum>
                        <maximum>300</maximum>
                    </param>
                </params>
            </command>

            <!-- Text Input -->
            <command>
                <name>SendText</name>
                <description>Send text to Fire TV keyboard</description>
                <params>
                    <param>
                        <name>Text</name>
                        <type>STRING</type>
                    </param>
                </params>
            </command>

            <command>
                <name>SendCharacter</name>
                <description>Send a single character</description>
                <params>
                    <param>
                        <name>Character</name>
                        <type>STRING</type>
                    </param>
                </params>
            </command>

            <!-- Utility Commands -->
            <command>
                <name>Wake</name>
                <description>Wake Fire TV remote receiver</description>
            </command>
        </commands>
    </config>

    <!-- Device Capabilities -->
    <capabilities>
        <audio_consumer_count>0</audio_consumer_count>
        <audio_provider_count>1</audio_provider_count>
        <video_consumer_count>0</video_consumer_count>
        <video_provider_count>1</video_provider_count>
        <has_discrete_volume>False</has_discrete_volume>
        <has_discrete_mute>False</has_discrete_mute>
        <has_discrete_input_select>False</has_discrete_input_select>
        <has_toad_input_select>False</has_toad_input_select>
        <has_discrete_surround_mode_select>False</has_discrete_surround_mode_select>
        <has_tune_channel>False</has_tune_channel>
        <has_discrete_channel_select>False</has_discrete_channel_select>
        <has_channel_up_down>False</has_channel_up_down>
        <can_upclass_to_dvd>False</can_upclass_to_dvd>
        <can_upclass_to_disc_changer>False</can_upclass_to_disc_changer>
        <can_downclass_to_vcr>False</can_downclass_to_vcr>
        <can_downclass_to_pvr>False</can_downclass_to_pvr>
        <can_be_dvr>False</can_be_dvr>
    </capabilities>

    <!-- Proxies -->
    <proxies qty="1">
        <proxy proxybindingid="5001" name="Fire TV"
               small_image="icons/device_sm.png"
               large_image="icons/device_lg.png"
               image_source="c4z">cable</proxy>
    </proxies>

    <!-- Connections -->
    <connections>
        <!-- Proxy Binding Connection (Type 2) -->
        <!-- Note: type=2 connection should NOT have proxybindingid attribute -->
        <!-- The connection id (5001) matches the proxy's proxybindingid to link them -->
        <connection>
            <id>5001</id>
            <type>2</type>
            <connectionname>Control4 UI</connectionname>
            <consumer>False</consumer>
            <linelevel>False</linelevel>
            <classes>
                <class>
                    <classname>SATELLITE</classname>
                </class>
            </classes>
        </connection>

        <!-- HDMI Video Output (Type 5 = Video) -->
        <connection proxybindingid="5001">
            <id>2000</id>
            <type>5</type>
            <connectionname>HDMI Out</connectionname>
            <consumer>False</consumer>
            <linelevel>True</linelevel>
            <classes>
                <class>
                    <classname>HDMI</classname>
                </class>
            </classes>
        </connection>

        <!-- Audio Output (Type 6 = Audio) -->
        <connection proxybindingid="5001">
            <id>4000</id>
            <type>6</type>
            <connectionname>Audio Out</connectionname>
            <consumer>False</consumer>
            <linelevel>True</linelevel>
            <classes>
                <class>
                    <classname>STEREO</classname>
                </class>
                <class>
                    <classname>DIGITAL_OPTICAL</classname>
                </class>
                <class>
                    <classname>HDMI</classname>
                </class>
            </classes>
        </connection>

        <!-- Network Connection (Type 4 = Control) -->
        <connection proxybindingid="5001">
            <id>6001</id>
            <type>4</type>
            <connectionname>Ethernet</connectionname>
            <consumer>True</consumer>
            <linelevel>True</linelevel>
        </connection>
    </connections>

    <!-- Events -->
    <events>
        <event>
            <id>1</id>
            <name>Paired</name>
            <description>Fire TV successfully paired</description>
        </event>
        <event>
            <id>2</id>
            <name>Connection Lost</name>
            <description>Connection to Fire TV lost</description>
        </event>
        <event>
            <id>3</id>
            <name>Connection Restored</name>
            <description>Connection to Fire TV restored</description>
        </event>
        <event>
            <id>4</id>
            <name>Pairing Failed</name>
            <description>Fire TV pairing failed</description>
        </event>
    </events>
</devicedata>
